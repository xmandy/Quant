# 量化交易实战：12周从程序员到量化交易者 (Step-by-Step)

这份教程专为**熟悉 Python/C++ 但缺乏金融知识的程序员**设计。我们将利用你的编程优势，通过“代码先行、理论跟进”的方式，在 3 个月（12周）内实现从零到模拟盘实战的目标。

**核心理念**：不要先啃大部头金融教材，而是通过写策略去理解金融概念。

---

## 第一阶段：量化基础设施与金融扫盲 (Week 1-4)
**目标**：建立本地量化开发环境，理解最基础的金融数据结构（K线、Tick、Order Book）。

### Week 1: 环境搭建与数据获取 (Python)
*   **金融知识点**: 什么是 OHLCV (Open, High, Low, Close, Volume)？什么是复权 (Adjusted Price)？
*   **技术任务**:
    1.  搭建 Python 环境 (Anaconda/Miniconda, VS Code)。
    2.  使用 `yfinance` 或 `tushare` 获取股票日线数据。
    3.  **练习**: 编写脚本下载 Apple (AAPL) 过去 5 年的数据，并清洗数据（处理缺失值、NaN）。
*   **交付物**: 一个本地 CSV 数据库和对应的数据读取脚本。

### Week 2: 数据分析与可视化 (Pandas/Matplotlib)
*   **金融知识点**: 简单移动平均线 (SMA)、收益率 (Return)、波动率 (Volatility)。
*   **技术任务**:
    1.  熟练使用 Pandas 进行时间序列处理（resample, rolling, shift）。
    2.  计算每日收益率：`df['return'] = df['close'].pct_change()`。
    3.  **练习**: 绘制股价图，并叠加 20日和 60日均线；绘制收益率分布直方图。
*   **交付物**: 一个 Jupyter Notebook，展示了对某只股票的探索性数据分析 (EDA)。

### Week 3: 简单的回测框架搭建 (Backtesting)
*   **金融知识点**: 策略逻辑（信号生成）、持仓 (Position)、资金 (Capital)、盈亏 (PnL)。
*   **技术任务**:
    1.  不使用现成框架，尝试用 Python `class` 手写一个最简回测系统。
    2.  实现逻辑：
        *   `Strategy` 类：根据 SMA 金叉死叉生成买卖信号。
        *   `Backtest` 类：循环遍历每一天，根据信号更新资金和持仓。
*   **交付物**: 一个纯 Python 写的回测脚本，能输出最终资金曲线。

### Week 4: 引入专业回测框架 (Backtrader/VeighNa)
*   **金融知识点**: 交易成本 (Commission)、滑点 (Slippage)、市价单 vs 限价单 (Market vs Limit Order)。
*   **技术任务**:
    1.  选择一个框架入门（推荐 **Backtrader** 适合 Python 熟手，或 **VeighNa (vn.py)** 如果想深入 C++ 接口/国内期货）。
    2.  将 Week 3 的双均线策略移植到框架中。
    3.  加入佣金设置，观察策略表现的变化。
*   **交付物**: 基于框架的回测报告（包含夏普比率、最大回撤等指标）。

---

## 第二阶段：策略开发与金融进阶 (Week 5-8)
**目标**：掌握经典策略类型，并开始接触更复杂的金融衍生品或高频概念。

### Week 5: 动量与均值回归策略 (Momentum & Mean Reversion)
*   **金融知识点**: 趋势跟踪、RSI 指标、布林带 (Bollinger Bands)。
*   **技术任务**:
    1.  实现一个**海龟交易法则**（趋势突破）的简化版。
    2.  实现一个**布林带回归策略**（触底买入，触顶卖出）。
    3.  对比两种策略在不同市场环境（牛市、震荡市）下的表现。
*   **交付物**: 两个不同逻辑的策略代码及其回测对比分析。

### Week 6: 多因子选股 (Multi-Factor Alpha)
*   **金融知识点**: 因子 (Factor)、市值因子、估值因子 (PE/PB)、Alpha vs Beta。
*   **技术任务**:
    1.  不再只交易一只股票，而是处理 100+ 只股票的横截面数据。
    2.  编写代码筛选“低市盈率 (Low PE) 且 近期涨幅高 (Momentum)”的股票组合。
    3.  定期调仓（例如每月初换股）。
*   **交付物**: 一个简单的多因子选股策略回测结果。

### Week 7: 风险管理与投资组合优化
*   **金融知识点**: 止损 (Stop Loss)、止盈 (Take Profit)、凯利公式、马科维茨资产组合理论 (Mpt)。
*   **技术任务**:
    1.  给之前的策略加入动态止损逻辑（如移动止损 Trailing Stop）。
    2.  (进阶) 使用 `scipy.optimize` 计算有效前沿，分配不同资产的权重。
*   **交付物**: 带有完善风控模块的策略代码。

### Week 8: C++ 性能优化与高频交易初探 (Optional)
*   **金融知识点**: 订单簿 (Order Book)、Level 2 数据、延迟 (Latency)。
*   **技术任务**:
    1.  利用你的 C++ 优势，尝试读取并解析高频 Tick 数据（CSV 或 二进制）。
    2.  编写一个简单的 C++ 程序，模拟撮合引擎（Matching Engine）的逻辑。
    3.  或者：研究 **Kungfu (功夫量化)** 等基于 C++ 的低延迟交易系统架构。
*   **交付物**: 一个 C++ 解析器 demo 或简单的撮合逻辑实现。

---

## 第三阶段：实战模拟与工程化 (Week 9-12)
**目标**：将策略部署到模拟环境，体验真实市场的脉搏。

### Week 9: 接入模拟交易平台 (Paper Trading)
*   **平台选择**: **QuantConnect** (云端，支持 Python/C#), **Interactive Brokers (IBKR)** 模拟账户, 或国内的 **SimNow** (期货)。
*   **任务**:
    1.  注册账号，申请 API Key。
    2.  配置本地环境连接到模拟交易所 API。
    3.  编写一个简单的“心跳”程序，每分钟查询一次账户余额和持仓。
*   **交付物**: 成功连接 API 并获取账户信息的截图。

### Week 10: 策略实盘化改造
*   **金融知识点**: 异步编程、事件驱动 (Event Driven)、异常处理。
*   **技术任务**:
    1.  将回测代码改造为实盘代码（处理实时数据流）。
    2.  加入健壮性代码：网络断连重连、报错报警（发邮件/钉钉消息）。
    3.  部署策略到模拟盘，运行简单的双均线策略。
*   **交付物**: 能够连续 24 小时稳定运行的模拟盘策略脚本。

### Week 11: 策略监控与日志分析
*   **任务**:
    1.  建立监控面板（可以是简单的 Log 文件，或者 Grafana）。
    2.  记录每一笔订单的发送时间、成交时间、成交价格。
    3.  分析“滑点”：模拟成交价和策略理论价格的偏差。
*   **交付物**: 一份模拟盘运行日志分析报告。

### Week 12: 总结与进阶路线规划
*   **任务**:
    1.  复盘这 3 个月的学习成果。
    2.  决定未来的方向：
        *   **P Quant (买方)**: 深入机器学习、多因子、资产配置 -> 学习 PyTorch, 统计学。
        *   **Q Quant (卖方/衍生品)**: 深入期权定价、随机微积分 -> 学习 C++, 蒙特卡洛模拟。
        *   **Dev Quant (系统开发)**: 深入低延迟系统 -> 学习 C++17/20, FPGA, 网络编程。
*   **交付物**: 你的第一份量化项目作品集 (Portfolio)。

---

## 推荐资源

*   **书籍**:
    *   入门: 《打开量化投资的黑箱》(Inside the Black Box)
    *   Python: 《Python for Finance》(O'Reilly)
    *   策略: 《交易策略评估与业绩归因》
*   **框架**: Backtrader (Python), VeighNa (Python/C++), QuantConnect (Lean Engine - C# but supports Python)
*   **数据源**: Yahoo Finance (免费), Tushare (国内), QuantData (专业)

祝你转型顺利！
